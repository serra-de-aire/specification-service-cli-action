name: Testing integration with specification service webhook

on:
  workflow_dispatch:

jobs:
  curl-job:
    name: Curl for Github Actions
    runs-on: ubuntu-latest
    steps:
      - name: generate request body
        run: |
          JSON_PAYLOAD='{"name":"github push event commit_created", "subject":"repository:${{ GITHUB_REPOSITORY }};commit:${{ GITHUB_SHA }}"}'
          echo 'JSON_PAYLOAD='$JSON_PAYLOAD >> $GITHUB_ENV
      - name: curl
        env:
          SPEC_SERVICE_URL: https://specification-service.onrender.com/events
        run: |
          response=$(curl -X POST -H "Content-Type: application/json" $SPEC_SERVICE_URL -d '$JSON_PAYLOAD')
          echo Response:$response
